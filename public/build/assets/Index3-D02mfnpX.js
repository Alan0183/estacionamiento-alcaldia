import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as j}from"./app-BMQbkYCC.js";const Ne="/api/parking/map-data",He=15e3,W={libre:{fill:"#eaf3eb",stroke:"#2e7d32",strokeH:"#388e3c",text:"#1b5e20"},ocupado:{fill:"#faeaee",stroke:"#691C32",strokeH:"#8B2442",text:"#691C32"},reservado:{fill:"#fdf8ec",stroke:"#C8A84B",strokeH:"#b8952a",text:"#6b4f00"}},ne={libre:{bg:"#eaf3eb",color:"#1b5e20",border:"#2e7d32",label:"Libre"},ocupado:{bg:"#faeaee",color:"#691C32",border:"#8B2442",label:"Ocupado"},reservado:{bg:"#fdf8ec",color:"#6b4f00",border:"#C8A84B",label:"Reservado"}};function Oe({visible:t,x:s,y:o,slotKey:i,info:x}){if(!t)return null;const n=x?.estado??"libre",r=ne[n]??ne.libre;return e.jsxs("div",{style:{position:"fixed",left:s,top:o,zIndex:1e3,background:"#fff",border:"2px solid #691C32",borderRadius:10,padding:"14px 18px",pointerEvents:"none",minWidth:210,boxShadow:"0 6px 24px rgba(105,28,50,0.15)",fontFamily:"'Syne',system-ui,sans-serif"},children:[e.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"#9e7a83",textTransform:"uppercase",letterSpacing:1,marginBottom:6},children:["CAJÓN #",i]}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#691C32",marginBottom:4},children:n==="libre"?"Disponible":x?.nombre||"—"}),n!=="libre"&&e.jsx("div",{style:{fontFamily:"monospace",fontSize:13,color:"#C8A84B",letterSpacing:2,marginBottom:4},children:n==="ocupado"?x?.placa||"—":x?.notas||"—"}),n==="ocupado"&&x?.phone&&e.jsx("div",{style:{fontSize:13,color:"#C8A84B",marginBottom:6},children:x.phone}),e.jsx("span",{style:{display:"inline-block",fontSize:11,fontWeight:700,padding:"3px 10px",borderRadius:20,textTransform:"uppercase",letterSpacing:1,marginTop:4,background:r.bg,color:r.color,border:`1px solid ${r.border}`},children:r.label})]})}const H=26,Te=36,Fe=1;function N(t,s,o,i=H,x=Te,n=""){return t.map((r,a)=>({num:r,x:s+a*(i+Fe),y:o,w:i,h:x,suffix:n,slotKey:n?`${r}${n}`:String(r)}))}const Ie=[...N([1,2,3,4,5,6,7],80,12),...N([8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],530,12),...[64,65,66].map((t,s)=>({num:t,x:80,y:148+s*34,w:H,h:30,suffix:"",slotKey:String(t)})),...N([63,62,61,60,59],112,148,H,90),...N([58,57,56,55,54,53,52],904,148,H,90),...N([51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36],1112,148,H,90),...N([139,140,141,142,143,144,145,146,147,148],112,248,H,70,"B"),...N([67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92],430,248,H,70),...N([136,135,134,133,132,131,130,129,128],80,358,H,50,"B"),...N([127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93],330,358,H,50),{num:138,x:56,y:248,w:22,h:70,suffix:"B",slotKey:"138B"},{num:137,x:56,y:358,w:22,h:50,suffix:"B",slotKey:"137B"}];function ze({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),a=s?.estado??"libre",d=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:t.w,height:t.h,rx:3,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1.5,style:{filter:n?"brightness(1.6)":"none",transition:"filter 0.15s"}}),e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2-(t.suffix?5:0),fontSize:8,fill:d.text,textAnchor:"middle",dominantBaseline:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:t.num}),t.suffix&&e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2+8,fontSize:8,fill:d.text,textAnchor:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:"B"})]})}function Re({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:12,padding:20,overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{viewBox:"0 0 1560 430",xmlns:"http://www.w3.org/2000/svg",style:{display:"block",minWidth:1400},children:[e.jsx("rect",{x:"2",y:"2",width:"50",height:"90",fill:"#faeaee",stroke:"#691C32",strokeWidth:1.5,rx:4}),e.jsx("text",{x:"27",y:"47",fontSize:9,fontWeight:700,fill:"#691C32",textAnchor:"middle",dominantBaseline:"middle",transform:"rotate(-90,27,47)",style:{letterSpacing:2,fontFamily:"Syne,sans-serif"},children:"ENTRADA"}),e.jsx("text",{x:"380",y:"120",fontSize:10,fill:"#9e7a83",textAnchor:"middle",fontFamily:"monospace",style:{letterSpacing:2},children:"PASILLO CENTRAL"}),e.jsx("rect",{x:"55",y:"2",width:"1498",height:"420",fill:"none",stroke:"#691C32",strokeWidth:1,rx:4}),e.jsx("line",{x1:"55",y1:"230",x2:"1553",y2:"230",stroke:"#ddd0d4",strokeWidth:1,strokeDasharray:"4,4"}),e.jsx("line",{x1:"55",y1:"340",x2:"1553",y2:"340",stroke:"#ddd0d4",strokeWidth:1,strokeDasharray:"4,4"}),Ie.map(x=>e.jsx(ze,{slot:x,info:t[x.slotKey],onEnter:s,onMove:o,onLeave:i},`p1-${x.slotKey}`))]})})}const ee=28,K=22,me=1;function F(t,s,o){return t.map((i,x)=>({num:i,x:s+x*(ee+me),y:o,slotKey:String(i)}))}const g=60,G=K+me,Xe=[344,342,340,338,336],Ye=[343,341,339,337,335],V=g+370,q=80,$e=[{num:346,x:V-30,y:q,slotKey:"346"},{num:345,x:V-30,y:q+G,slotKey:"345"}],De=[309,311,313,315,317,319,321,323,325,327,329,331,333],Pe=[310,312,314,316,318,320,322,324,326,328,330,332,334],xe=g,te=195,ve=[308,306,304,302,300,298,296,294,292,290,288,286,284],Ke=[307,305,303,301,299,297,295,293,291,289,287,285,283],de=g,se=310,Ee=[252,254,256,262,264,266,268,270,272,274,276,278,280,282],_e=[251,253,255,261,263,265,267,269,271,273,275,277,279,281],ae=g,ie=420,Ge=[...$e,...F(Xe,V,q),...F(Ye,V,q+G),...F(De,xe,te),...F(Pe,xe,te+G),...F(ve,de,se),...F(Ke,de,se+G),...F(Ee,ae,ie),...F(_e,ae,ie+G)];function Ue({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),a=s?.estado??"libre",d=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:ee,height:K,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+ee/2,y:t.y+K/2+4,textAnchor:"middle",fontSize:8,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"600",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function Je({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:12,padding:20,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:700,height:510,viewBox:"0 0 700 510",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrow2",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("text",{x:18,y:510/2,fontSize:9,fill:"#9e7a83",fontFamily:"monospace",textAnchor:"middle",transform:`rotate(-90,18,${510/2})`,letterSpacing:2,children:"ENTRADA"}),e.jsx("line",{x1:30,y1:510/2,x2:45,y2:510/2,stroke:"#C8A84B",strokeWidth:1.5,markerEnd:"url(#arrow2)"}),e.jsx("rect",{x:g+140,y:10,width:100,height:55,rx:4,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1,strokeDasharray:"3,2"}),e.jsx("text",{x:g+190,y:43,textAnchor:"middle",fontSize:11,fill:"#691C32",fontFamily:"monospace",letterSpacing:1,children:"MOTOS"}),e.jsx("rect",{x:g+270,y:10,width:90,height:40,rx:4,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("line",{x1:g,y1:185,x2:g+700-120,y2:185,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:g,y1:300,x2:g+700-120,y2:300,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:g,y1:410,x2:g+700-120,y2:410,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),[{x:g-20,y:te+K*1.5,t:"A"},{x:g-20,y:se+K*1.5,t:"B"},{x:g-20,y:ie+K*1.5,t:"C"}].map(r=>e.jsx("text",{x:r.x,y:r.y,fontSize:9,fill:"#691C32",fontFamily:"monospace",textAnchor:"middle",letterSpacing:1,children:r.t},r.t)),Ge.map(r=>e.jsx(Ue,{slot:r,info:t[r.slotKey],onEnter:s,onMove:o,onLeave:i},`p2-${r.slotKey}`))]})})}function Ve(t){const[s,o]=j.useState({}),[i,x]=j.useState({libres:0,ocupados:0,reservados:0}),[n,r]=j.useState("idle"),[a,d]=j.useState(""),y=j.useCallback(async()=>{r("loading");try{const p=await fetch(`${Ne}?piso=${t}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!p.ok)throw new Error(`HTTP ${p.status}`);const k=await p.json();o(k);const b=Object.values(k);x({libres:b.filter(u=>u.estado==="libre").length,ocupados:b.filter(u=>u.estado==="ocupado").length,reservados:b.filter(u=>u.estado==="reservado").length}),r("ok"),d(new Date().toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}catch(p){console.error(p),r("error")}},[t]);return j.useEffect(()=>{o({}),x({libres:0,ocupados:0,reservados:0}),r("idle"),y();const p=setInterval(y,He);return()=>clearInterval(p)},[y]),{data:s,stats:i,sync:n,time:a,refetch:y}}const T=30,ce=40,qe=[{num:4,x:75,y:175,slotKey:"4"},{num:3,x:75,y:175+(T+1),slotKey:"3"},{num:2,x:75,y:175+(T+1)*2,slotKey:"2"},{num:1,x:75,y:175+(T+1)*3,slotKey:"1"},{num:5,x:130,y:100,slotKey:"5"},{num:6,x:130+(T+1),y:100,slotKey:"6"},{num:7,x:345,y:100,slotKey:"7"},{num:8,x:345+(T+1),y:100,slotKey:"8"},{num:9,x:345+(T+1)*2,y:100,slotKey:"9"},{num:10,x:345+(T+1)*3,y:100,slotKey:"10"}];function Qe({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),a=s?.estado??"libre",d=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:T,height:ce,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+T/2,y:t.y+ce/2+4,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function _({x:t,y:s,w:o,h:i,label:x,sublabel:n,fontSize:r=9}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:t+o/2,y:s+i/2-(n?7:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:r,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:.5,children:x}),n&&n.map((a,d)=>e.jsx("text",{x:t+o/2,y:s+i/2+(d-n.length/2+1)*11+3,textAnchor:"middle",dominantBaseline:"middle",fontSize:r-1,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:a},d))]})}function Ze({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:16,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:720,height:380,viewBox:"0 0 720 380",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr3",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("rect",{x:20,y:20,width:680,height:310,rx:4,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5}),e.jsx("rect",{x:20,y:330,width:680,height:28,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:720/2,y:344,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,fill:"#691C32",children:"PARQUE DE LA JUVENTUD"}),e.jsx(_,{x:220,y:30,w:110,h:55,label:"KIOSKO"}),e.jsx(_,{x:460,y:30,w:120,h:55,label:"ENTRADA",sublabel:["POR CALLE 4"]}),e.jsx(_,{x:22,y:70,w:100,h:55,label:"OFICINAS",sublabel:["MEDIO","AMBIENTE"],fontSize:8}),e.jsx("rect",{x:658,y:110,width:40,height:210,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:678,y:110+210/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,678,${110+210/2})`,children:"FORO DEL OLIVAR"}),e.jsx(_,{x:22,y:175,w:65,h:22,label:"OFICINA",fontSize:8}),e.jsx(_,{x:22,y:200,w:65,h:70,label:"DIRECCIÓN",sublabel:["DE MEDIO","AMBIENTE"],fontSize:7}),e.jsx("line",{x1:125,y1:145,x2:460,y2:145,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:520,y1:90,x2:520,y2:145,stroke:"#C8A84B",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr3)"}),qe.map(a=>e.jsx(Qe,{slot:a,info:t[a.slotKey],onEnter:s,onMove:o,onLeave:i},`p3-${a.slotKey}`))]})})}const B=28,w=22,O=780,oe=430,c=16,C=oe-c-28,A=C-w-6,U=100,Q=U+30,Y=c+38,le=O-c-4,Z=390,re=20,fe=le-B,pe=U+20,Me=pe+w+2,L={};let S=le;[3,4,5,6,7,8,9].forEach(t=>{S-=B,L[t]=S,S-=1});const ue=48,je=S-ue;S=je;[10,11,12,13,14,15,16].forEach(t=>{S-=B,L[t]=S,S-=1});const ge=32,be=S-ge;S=be;[17,18,19,20,21].forEach(t=>{S-=B,L[t]=S,S-=1});const Se=36,Le=S-Se,M={};let E=Z;[22,23,24,25,26,27].forEach(t=>{E-=B,M[t]=E,E-=1});E=Z+re;[28,29,30,31].forEach(t=>{M[t]=E,E+=B+1});const ke=470,we=U-50,Ce=560,Ae=U-50,We=380,Be=U-70;function et({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),a=s?.estado??"libre",d=W[a]??W.libre,y=t.w??B,p=t.h??w;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:k=>{r(!0),o(k,String(t.num))},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:y,height:p,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+y/2,y:t.y+p/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function P({x:t,y:s,w:o,h:i,lines:x=[],fontSize:n=8,dashed:r=!1}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1,strokeDasharray:r?"4,3":void 0}),x.map((a,d)=>e.jsx("text",{x:t+o/2,y:s+i/2+(d-(x.length-1)/2)*(n+3),textAnchor:"middle",dominantBaseline:"middle",fontSize:n,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:.3,children:a},d))]})}const tt=[{num:1,x:fe,y:pe},{num:2,x:fe,y:Me},...[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map(t=>({num:t,x:L[t],y:A})),...[22,23,24,25,26].map(t=>({num:t,x:M[t],y:Q})),...[27,28,29,30,31].map(t=>({num:t,x:M[t],y:Q})),{num:32,x:ke,y:we,h:w+10},{num:37,x:Ce,y:Ae,h:w+10},...[33,34,35,36].map((t,s)=>({num:t,x:We+s*(B+1),y:Be-w-4}))];function st({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:16,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:O,height:oe,viewBox:`0 0 ${O} ${oe}`,children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr4",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("rect",{x:c+36,y:c,width:O-c-40,height:C-c,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:c,y:c,width:36,height:C-c,rx:3,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:c+18,y:c+(C-c)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:2,transform:`rotate(-90,${c+18},${c+(C-c)/2})`,children:"CANARIO"}),e.jsx("rect",{x:c+36,y:C,width:O-c-40,height:28,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:(O+c+36)/2,y:C+14,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,children:"PROLONGACIÓN CALLE 4"}),e.jsx(P,{x:Y+2,y:80,w:160,h:80,lines:["PROTECCIÓN","CIVIL"],fontSize:9}),e.jsx(P,{x:Y+164,y:95,w:80,h:65,lines:["SUBES-","TACIÓN"],fontSize:8}),e.jsx(P,{x:We,y:Be,w:90,h:50,lines:["OFICINA"],fontSize:9}),e.jsx("rect",{x:O-c-42,y:110,width:40,height:C-c-110+10,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:O-c-22,y:110+(C-c-110+10)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${O-c-22},${110+(C-c-110+10)/2})`,children:"FORO DEL OLIVAR"}),e.jsx("rect",{x:Z,y:Q,width:re,height:w,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1,rx:1}),e.jsx("text",{x:Z+re/2,y:Q+w/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",children:"+"}),e.jsx("text",{x:ke+B/2,y:we-7,textAnchor:"middle",fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:Ce+B/2,y:Ae-7,textAnchor:"middle",fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:Y+6,y:A-12,fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${Y+6},${A-12})`,children:"Entrada"}),e.jsx("line",{x1:Y+18,y1:A-4,x2:Y+50,y2:A-4,stroke:"#C8A84B",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr4)"}),e.jsx(P,{x:Le,y:A,w:Se,h:w,lines:["CASETA"],fontSize:7}),e.jsx(P,{x:be,y:A,w:ge,h:w,lines:["JARDÍN"],fontSize:6}),e.jsx(P,{x:je,y:A,w:ue,h:w,lines:["OFICINA"],fontSize:7}),e.jsx("line",{x1:Y+36,y1:A-18,x2:le,y2:A-18,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"5,4"}),tt.map(x=>e.jsx(et,{slot:x,info:t[String(x.num)],onEnter:s,onMove:o,onLeave:i},`p4-${x.num}`))]})})}const I=24,f=18,h=1;function l({nums:t,x:s,y:o,cols:i=1,data:x,onEnter:n,onMove:r,onLeave:a,border:d=!0}){const y=Math.ceil(t.length/i),p=i*I+(i-1)*h+6,k=y*f+(y-1)*h+6;return e.jsxs("g",{children:[d&&e.jsx("rect",{x:s,y:o,width:p,height:k,rx:2,fill:"none",stroke:"#c5a0aa",strokeWidth:1}),t.map((b,u)=>{const z=u%i,R=Math.floor(u/i);return e.jsx($,{num:b,x:s+3+z*(I+h),y:o+3+R*(f+h),info:x[String(b)],onEnter:n,onMove:r,onLeave:a},`p5-${b}`)})]})}function $({num:t,x:s,y:o,w:i=I,h:x=f,info:n,onEnter:r,onMove:a,onLeave:d}){const[y,p]=j.useState(!1),k=n?.estado??"libre",b=W[k]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:u=>{p(!0),r(u,String(t))},onMouseMove:a,onMouseLeave:()=>{p(!1),d()},children:[e.jsx("rect",{x:s,y:o,width:i,height:x,rx:2,fill:b.fill,stroke:y?b.strokeH:b.stroke,strokeWidth:y?2:1,style:{filter:y?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:s+i/2,y:o+x/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:6.5,fill:b.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t})]})}function v({x:t,y:s,w:o,h:i,label:x="",sub:n,italic:r}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:t+o/2,y:s+i/2-(n?6:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#4a6080",fontFamily:"'Courier New',monospace",fontStyle:r?"italic":"normal",children:x}),n&&e.jsx("text",{x:t+o/2,y:s+i/2+8,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:"#4a6080",fontFamily:"'Courier New',monospace",children:n})]})}function it({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:12,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:920,height:560,viewBox:"0 0 920 560",children:[e.jsx("rect",{x:16,y:14,width:824,height:506,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:16,y:520,width:824,height:26,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:856/2,y:533,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,fontWeight:"700",children:"CALLE ANCONITANOS"}),e.jsx("rect",{x:844,y:112,width:52,height:408,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:844+52/2,y:112+408/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#4a6080",fontFamily:"'Courier New',monospace",letterSpacing:1.5,transform:`rotate(-90,${844+52/2},${112+408/2})`,children:"Av. Central"}),e.jsx(v,{x:844,y:14,w:52,h:95,label:"ENTRADA",sub:"/ SALIDA"}),e.jsx(v,{x:19,y:17,w:215,h:130,label:"Edificio",italic:!0}),e.jsx(v,{x:328,y:17,w:90,h:65,label:"Edificio",italic:!0}),e.jsx(v,{x:440,y:17,w:200,h:58}),e.jsx(v,{x:648,y:17,w:48,h:58}),e.jsx(v,{x:702,y:17,w:60,h:58}),e.jsx($,{num:250,x:19,y:152,w:28,h:f,info:t[250],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:249,x:51,y:152,w:65,h:f,info:t[249],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:248,x:120,y:152,w:60,h:f,info:t[248],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:247,x:184,y:152,w:52,h:f,info:t[247],onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[246,245],x:328,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[244,243],x:328+I+h+8,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[242,241],x:420,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[240,239,238,237,236,235,234,233,232,231],x:440,y:77,cols:10,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[230,229],x:708,y:77,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[228],x:766,y:77,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx("text",{x:20,y:215,fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx(l,{nums:[129,128,131,130],x:32,y:206,cols:4,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[133,132],x:32+2*(I+h)+8,y:206+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[135,134],x:126,y:288,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[137,136],x:126,y:288+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[139,138],x:126,y:342,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[141,140],x:126,y:342+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[143,142],x:126,y:400,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[145,144],x:126,y:400+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[171,170],x:310,y:246,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[173,175],x:338,y:222,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[172,174],x:338,y:222+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[167,166],x:310,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[169,168],x:370,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[159,158],x:310,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[163,162],x:310,y:358+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[165,164],x:370,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[161,160],x:370,y:358+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[151,150],x:310,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[155,154],x:310,y:416+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[157,156],x:370,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[153,152],x:370,y:416+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[147,146],x:310,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[149,148],x:370,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[177,176],x:448,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[179,178],x:448,y:224,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[181,180],x:448,y:250,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:182,x:508,y:198,w:I,h:f*2+h+6,info:t[182],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:183,x:508,y:284,w:I,h:f*2+h+6,info:t[183],onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[197,196,195,194],x:546,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[193,192,191,190],x:546,y:248,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[189,188,187,186],x:546,y:360,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[185,184],x:546,y:440,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[199,198],x:658,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[201,200],x:658,y:178+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[205,203],x:658,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[204,202],x:658,y:244+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[207,206],x:658,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[209,208],x:658,y:318+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[211,210],x:658,y:396,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[213,212],x:658,y:396+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[214],x:658,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[215],x:658+I+h+30,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[226,227],x:720,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[224,225],x:720,y:178+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[222,223],x:720,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[220,221],x:720,y:244+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[218,219],x:720,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[216,217],x:720,y:318+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i})]})})}const he=[{id:1,label:"Estacionamiento 1",sublabel:"ESTACIONAMIENTO CALLE 10"},{id:2,label:"Estacionamiento 2",sublabel:"ESTACIONAMIENTO CANARIOS"},{id:3,label:"Estacionamiento 3",sublabel:"ESTACIONAMIENTO MEDIO AMBIENTE"},{id:4,label:"Estacionamiento 4",sublabel:"ESTACIONAMIENTO OBRAS"},{id:5,label:"Estacionamiento 5",sublabel:"ESTACIONAMIENTO PAGADURIA"}];function lt(){const[t,s]=j.useState(1),[o,i]=j.useState(!1),[x,n]=j.useState({visible:!1,x:0,y:0,slotKey:"",info:null}),{data:r,stats:a,sync:d,time:y}=Ve(t),p=he.find(m=>m.id===t),k={idle:"#c5a0aa",loading:"#C8A84B",ok:"#2e7d32",error:"#691C32"}[d],b=d==="loading"?"pulse 1s infinite":"none",u=j.useCallback((m,D)=>{const X=r[D]??{estado:"libre"},J=ye(m.clientX,m.clientY);n({visible:!0,...J,slotKey:D,info:X})},[r]),z=j.useCallback(m=>{const D=ye(m.clientX,m.clientY);n(X=>X.visible?{...X,...D}:X)},[]),R=j.useCallback(()=>{n(m=>({...m,visible:!1}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;700;800&display=swap');
                @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
                *{box-sizing:border-box;}
                .floor-menu{position:relative;display:inline-block;}
                .floor-btn{
                    display:flex;align-items:center;gap:10px;
                    background:#fff;border:2px solid #691C32;
                    color:#691C32;border-radius:8px;padding:10px 16px;
                    cursor:pointer;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;
                    transition:all 0.15s;
                }
                .floor-btn:hover{background:#691C32;color:#fff;}
                .floor-badge{
                    background:#faeaee;color:#691C32;
                    border:1px solid #C8A84B;border-radius:6px;
                    padding:2px 8px;font-size:12px;font-family:monospace;font-weight:700;
                }
                .floor-dropdown{
                    position:absolute;top:calc(100% + 6px);left:0;
                    background:#fff;border:2px solid #691C32;
                    border-radius:10px;min-width:260px;z-index:500;
                    box-shadow:0 8px 32px rgba(105,28,50,0.15);overflow:hidden;
                }
                .floor-option{
                    display:flex;flex-direction:column;gap:2px;
                    padding:12px 16px;cursor:pointer;
                    transition:background 0.12s;border-bottom:1px solid #f0e4e8;
                    font-family:'Syne',sans-serif;
                }
                .floor-option:last-child{border-bottom:none;}
                .floor-option:hover{background:#faeaee;}
                .floor-option.active{background:#691C32;}
                .floor-option.active .floor-option-label{color:#fff;}
                .floor-option.active .floor-option-sub{color:#C8A84B;}
                .floor-option-label{font-size:14px;font-weight:700;color:#691C32;}
                .floor-option-sub{font-size:11px;color:#9e7a83;font-family:monospace;}
                .chevron{transition:transform 0.2s;}
                .chevron.open{transform:rotate(180deg);}
                .map-center{display:flex;justify-content:center;width:100%;overflow-x:auto;}
            `}),e.jsxs("div",{style:{background:"#87384e",minHeight:"100vh",padding:24,fontFamily:"'Syne',system-ui,sans-serif",color:"#691C32"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:28,paddingBottom:20,borderBottom:"3px solid #691C32",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0,borderRadius:3,overflow:"hidden"},children:[e.jsx("div",{style:{width:7,height:22,background:"#691C32"}}),e.jsx("div",{style:{width:7,height:9,background:"#C8A84B"}})]}),e.jsx("div",{children:e.jsx("img",{src:"/img/logo.svg",alt:"Logo Institucional",style:{height:70}})}),e.jsxs("div",{className:"floor-menu",style:{marginLeft:8},children:[e.jsxs("button",{className:"floor-btn",onClick:()=>i(m=>!m),children:[e.jsx("span",{className:"floor-badge",children:p?.label}),e.jsx("span",{style:{fontSize:12,color:"#9e7a83",fontFamily:"monospace"},children:p?.sublabel}),e.jsx("svg",{className:`chevron${o?" open":""}`,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2.5",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:499},onClick:()=>i(!1)}),e.jsx("div",{className:"floor-dropdown",children:he.map(m=>e.jsxs("div",{className:`floor-option${t===m.id?" active":""}`,onClick:()=>{s(m.id),i(!1)},children:[e.jsx("span",{className:"floor-option-label",children:m.label}),e.jsx("span",{className:"floor-option-sub",children:m.sublabel})]},m.id))})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[[{color:"#1b5e20",bg:"#eaf3eb",border:"#2e7d32",label:`${a.libres} Libres`},{color:"#691C32",bg:"#faeaee",border:"#8B2442",label:`${a.ocupados} Ocupados`},{color:"#6b4f00",bg:"#fdf8ec",border:"#C8A84B",label:`${a.reservados} Reservados`}].map(({color:m,bg:D,border:X,label:J})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:7,fontFamily:"monospace",fontSize:13,fontWeight:700,background:D,border:`1px solid ${X}`,borderRadius:6,padding:"5px 12px",color:m},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:2,background:m}}),e.jsx("span",{children:J})]},J)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontFamily:"monospace",fontSize:12,color:"#9e7a83",background:"#fff",border:"1px solid #ddd0d4",borderRadius:6,padding:"5px 10px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:k,animation:b}}),e.jsxs("span",{children:[d==="loading"&&"Actualizando…",d==="ok"&&`Sync ${y}`,d==="error"&&"Sin conexión",d==="idle"&&"—"]})]})]})]}),e.jsxs("div",{className:"map-center",children:[t===1&&e.jsx(Re,{data:r,onEnter:u,onMove:z,onLeave:R}),t===2&&e.jsx(Je,{data:r,onEnter:u,onMove:z,onLeave:R}),t===3&&e.jsx(Ze,{data:r,onEnter:u,onMove:z,onLeave:R}),t===4&&e.jsx(st,{data:r,onEnter:u,onMove:z,onLeave:R}),t===5&&e.jsx(it,{data:r,onEnter:u,onMove:z,onLeave:R})]})]}),e.jsx(Oe,{...x})]})}function ye(t,s){return{x:t+16+220>window.innerWidth?t-220-16:t+16,y:s-10+130>window.innerHeight?s-130:s-10}}export{lt as default};
