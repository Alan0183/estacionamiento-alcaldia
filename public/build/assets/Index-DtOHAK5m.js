import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as b}from"./app-BMQbkYCC.js";const Te="/api/parking/map-data",Oe=15e3,W={libre:{fill:"#eaf3eb",stroke:"#2e7d32",strokeH:"#388e3c",text:"#1b5e20"},ocupado:{fill:"#faeaee",stroke:"#691C32",strokeH:"#8B2442",text:"#691C32"},reservado:{fill:"#fdf8ec",stroke:"#C8A84B",strokeH:"#b8952a",text:"#6b4f00"}},xe={libre:{bg:"#eaf3eb",color:"#1b5e20",border:"#2e7d32",label:"Libre"},ocupado:{bg:"#faeaee",color:"#691C32",border:"#8B2442",label:"Ocupado"},reservado:{bg:"#fdf8ec",color:"#6b4f00",border:"#C8A84B",label:"Reservado"}};function Ie({visible:t,x:s,y:o,slotKey:i,info:n}){if(!t)return null;const r=n?.estado??"libre",l=xe[r]??xe.libre;return e.jsxs("div",{style:{position:"fixed",left:s,top:o,zIndex:1e3,background:"#fff",border:"2px solid #691C32",borderRadius:10,padding:"14px 18px",pointerEvents:"none",minWidth:210,boxShadow:"0 6px 24px rgba(105,28,50,0.15)",fontFamily:"'Syne',system-ui,sans-serif"},children:[e.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"#9e7a83",textTransform:"uppercase",letterSpacing:1,marginBottom:6},children:["CAJÃ“N #",i]}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#691C32",marginBottom:4},children:r==="libre"?"Disponible":n?.nombre||"â€”"}),r!=="libre"&&e.jsx("div",{style:{fontFamily:"monospace",fontSize:13,color:"#C8A84B",letterSpacing:2,marginBottom:4},children:r==="ocupado"?n?.placa||"â€”":n?.notas||"â€”"}),r==="ocupado"&&n?.phone&&e.jsx("div",{style:{fontSize:13,color:"#C8A84B",marginBottom:6},children:n.phone}),e.jsx("span",{style:{display:"inline-block",fontSize:11,fontWeight:700,padding:"3px 10px",borderRadius:20,textTransform:"uppercase",letterSpacing:1,marginTop:4,background:l.bg,color:l.color,border:`1px solid ${l.border}`},children:l.label})]})}const T=26,He=36,Re=1;function N(t,s,o,i=T,n=He,r=""){return t.map((l,a)=>({num:l,x:s+a*(i+Re),y:o,w:i,h:n,suffix:r,slotKey:r?`${l}${r}`:String(l)}))}const Ye=[...N([1,2,3,4,5,6,7],80,12),...N([8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],530,12),...[64,65,66].map((t,s)=>({num:t,x:80,y:148+s*34,w:T,h:30,suffix:"",slotKey:String(t)})),...N([63,62,61,60,59],112,148,T,90),...N([58,57,56,55,54,53,52],904,148,T,90),...N([51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36],1112,148,T,90),...N([139,140,141,142,143,144,145,146,147,148],112,248,T,70,"B"),...N([67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92],430,248,T,70),...N([136,135,134,133,132,131,130,129,128],80,358,T,50,"B"),...N([127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93],330,358,T,50),{num:138,x:56,y:248,w:22,h:70,suffix:"B",slotKey:"138B"},{num:137,x:56,y:358,w:22,h:50,suffix:"B",slotKey:"137B"}];function Xe({slot:t,info:s,onEnter:o,onMove:i,onLeave:n}){const[r,l]=b.useState(!1),a=s?.estado??"libre",c=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:f=>{l(!0),o(f,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{l(!1),n()},children:[e.jsx("rect",{x:t.x,y:t.y,width:t.w,height:t.h,rx:3,fill:c.fill,stroke:r?c.strokeH:c.stroke,strokeWidth:r?2:1.5,style:{filter:r?"brightness(1.6)":"none",transition:"filter 0.15s"}}),e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2-(t.suffix?5:0),fontSize:8,fill:c.text,textAnchor:"middle",dominantBaseline:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:t.num}),t.suffix&&e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2+8,fontSize:8,fill:c.text,textAnchor:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:"B"})]})}function $e({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:12,padding:20,overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{viewBox:"0 0 1560 430",xmlns:"http://www.w3.org/2000/svg",style:{display:"block",minWidth:1400},children:[e.jsx("rect",{x:"2",y:"2",width:"50",height:"90",fill:"#faeaee",stroke:"#691C32",strokeWidth:1.5,rx:4}),e.jsx("text",{x:"27",y:"47",fontSize:9,fontWeight:700,fill:"#691C32",textAnchor:"middle",dominantBaseline:"middle",transform:"rotate(-90,27,47)",style:{letterSpacing:2,fontFamily:"Syne,sans-serif"},children:"ENTRADA"}),e.jsx("text",{x:"380",y:"120",fontSize:10,fill:"#9e7a83",textAnchor:"middle",fontFamily:"monospace",style:{letterSpacing:2},children:"PASILLO CENTRAL"}),e.jsx("rect",{x:"55",y:"2",width:"1498",height:"420",fill:"none",stroke:"#691C32",strokeWidth:1,rx:4}),e.jsx("line",{x1:"55",y1:"230",x2:"1553",y2:"230",stroke:"#ddd0d4",strokeWidth:1,strokeDasharray:"4,4"}),e.jsx("line",{x1:"55",y1:"340",x2:"1553",y2:"340",stroke:"#ddd0d4",strokeWidth:1,strokeDasharray:"4,4"}),Ye.map(n=>e.jsx(Xe,{slot:n,info:t[n.slotKey],onEnter:s,onMove:o,onLeave:i},`p1-${n.slotKey}`))]})})}const oe=28,_=22,be=1;function R(t,s,o){return t.map((i,n)=>({num:i,x:s+n*(oe+be),y:o,slotKey:String(i)}))}const S=60,V=_+be,De=[344,342,340,338,336],Ee=[343,341,339,337,335],Q=S+370,Z=80,Pe=[{num:346,x:Q-30,y:Z,slotKey:"346"},{num:345,x:Q-30,y:Z+V,slotKey:"345"}],Ke=[309,311,313,315,317,319,321,323,325,327,329,331,333],_e=[310,312,314,316,318,320,322,324,326,328,330,332,334],fe=S,re=195,Ue=[308,306,304,302,300,298,296,294,292,290,288,286,284],Ge=[307,305,303,301,299,297,295,293,291,289,287,285,283],he=S,le=310,Me=[252,254,256,262,264,266,268,270,272,274,276,278,280,282],Je=[251,253,255,261,263,265,267,269,271,273,275,277,279,281],pe=S,ne=420,Ve=[...Pe,...R(De,Q,Z),...R(Ee,Q,Z+V),...R(Ke,fe,re),...R(_e,fe,re+V),...R(Ue,he,le),...R(Ge,he,le+V),...R(Me,pe,ne),...R(Je,pe,ne+V)];function qe({slot:t,info:s,onEnter:o,onMove:i,onLeave:n}){const[r,l]=b.useState(!1),a=s?.estado??"libre",c=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:f=>{l(!0),o(f,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{l(!1),n()},children:[e.jsx("rect",{x:t.x,y:t.y,width:oe,height:_,rx:2,fill:c.fill,stroke:r?c.strokeH:c.stroke,strokeWidth:r?2:1,style:{filter:r?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+oe/2,y:t.y+_/2+4,textAnchor:"middle",fontSize:8,fill:c.text,fontFamily:"'Courier New',monospace",fontWeight:"600",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function Qe({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:12,padding:20,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:700,height:510,viewBox:"0 0 700 510",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrow2",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("text",{x:18,y:510/2,fontSize:9,fill:"#9e7a83",fontFamily:"monospace",textAnchor:"middle",transform:`rotate(-90,18,${510/2})`,letterSpacing:2,children:"ENTRADA"}),e.jsx("line",{x1:30,y1:510/2,x2:45,y2:510/2,stroke:"#C8A84B",strokeWidth:1.5,markerEnd:"url(#arrow2)"}),e.jsx("rect",{x:S+140,y:10,width:100,height:55,rx:4,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1,strokeDasharray:"3,2"}),e.jsx("text",{x:S+190,y:43,textAnchor:"middle",fontSize:11,fill:"#691C32",fontFamily:"monospace",letterSpacing:1,children:"MOTOS"}),e.jsx("rect",{x:S+270,y:10,width:90,height:40,rx:4,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("line",{x1:S,y1:185,x2:S+700-120,y2:185,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:S,y1:300,x2:S+700-120,y2:300,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:S,y1:410,x2:S+700-120,y2:410,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),[{x:S-20,y:re+_*1.5,t:"A"},{x:S-20,y:le+_*1.5,t:"B"},{x:S-20,y:ne+_*1.5,t:"C"}].map(l=>e.jsx("text",{x:l.x,y:l.y,fontSize:9,fill:"#691C32",fontFamily:"monospace",textAnchor:"middle",letterSpacing:1,children:l.t},l.t)),Ve.map(l=>e.jsx(qe,{slot:l,info:t[l.slotKey],onEnter:s,onMove:o,onLeave:i},`p2-${l.slotKey}`))]})})}function Ze(t){const[s,o]=b.useState({}),[i,n]=b.useState({libres:0,ocupados:0,reservados:0}),[r,l]=b.useState("idle"),[a,c]=b.useState(""),f=b.useCallback(async()=>{l("loading");try{const h=await fetch(`${Te}?piso=${t}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!h.ok)throw new Error(`HTTP ${h.status}`);const j=await h.json();o(j);const x=Object.values(j);n({libres:x.filter(g=>g.estado==="libre").length,ocupados:x.filter(g=>g.estado==="ocupado").length,reservados:x.filter(g=>g.estado==="reservado").length}),l("ok"),c(new Date().toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}catch(h){console.error(h),l("error")}},[t]);return b.useEffect(()=>{o({}),n({libres:0,ocupados:0,reservados:0}),l("idle"),f();const h=setInterval(f,Oe);return()=>clearInterval(h)},[f]),{data:s,stats:i,sync:r,time:a,refetch:f}}const I=30,me=40,Le=[{num:4,x:75,y:175,slotKey:"4"},{num:3,x:75,y:175+(I+1),slotKey:"3"},{num:2,x:75,y:175+(I+1)*2,slotKey:"2"},{num:1,x:75,y:175+(I+1)*3,slotKey:"1"},{num:5,x:130,y:100,slotKey:"5"},{num:6,x:130+(I+1),y:100,slotKey:"6"},{num:7,x:345,y:100,slotKey:"7"},{num:8,x:345+(I+1),y:100,slotKey:"8"},{num:9,x:345+(I+1)*2,y:100,slotKey:"9"},{num:10,x:345+(I+1)*3,y:100,slotKey:"10"}];function et({slot:t,info:s,onEnter:o,onMove:i,onLeave:n}){const[r,l]=b.useState(!1),a=s?.estado??"libre",c=W[a]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:f=>{l(!0),o(f,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{l(!1),n()},children:[e.jsx("rect",{x:t.x,y:t.y,width:I,height:me,rx:2,fill:c.fill,stroke:r?c.strokeH:c.stroke,strokeWidth:r?2:1,style:{filter:r?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+I/2,y:t.y+me/2+4,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:c.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function J({x:t,y:s,w:o,h:i,label:n,sublabel:r,fontSize:l=9}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:t+o/2,y:s+i/2-(r?7:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:l,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:.5,children:n}),r&&r.map((a,c)=>e.jsx("text",{x:t+o/2,y:s+i/2+(c-r.length/2+1)*11+3,textAnchor:"middle",dominantBaseline:"middle",fontSize:l-1,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:a},c))]})}function tt({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:16,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:720,height:380,viewBox:"0 0 720 380",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr3",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("rect",{x:20,y:20,width:680,height:310,rx:4,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5}),e.jsx("rect",{x:20,y:330,width:680,height:28,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:720/2,y:344,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,fill:"#691C32",children:"PARQUE DE LA JUVENTUD"}),e.jsx(J,{x:220,y:30,w:110,h:55,label:"KIOSKO"}),e.jsx(J,{x:460,y:30,w:120,h:55,label:"ENTRADA",sublabel:["POR CALLE 4"]}),e.jsx(J,{x:22,y:70,w:100,h:55,label:"OFICINAS",sublabel:["MEDIO","AMBIENTE"],fontSize:8}),e.jsx("rect",{x:658,y:110,width:40,height:210,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:678,y:110+210/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,678,${110+210/2})`,children:"FORO DEL OLIVAR"}),e.jsx(J,{x:22,y:175,w:65,h:22,label:"OFICINA",fontSize:8}),e.jsx(J,{x:22,y:200,w:65,h:70,label:"DIRECCIÃ“N",sublabel:["DE MEDIO","AMBIENTE"],fontSize:7}),e.jsx("line",{x1:125,y1:145,x2:460,y2:145,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:520,y1:90,x2:520,y2:145,stroke:"#C8A84B",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr3)"}),Le.map(a=>e.jsx(et,{slot:a,info:t[a.slotKey],onEnter:s,onMove:o,onLeave:i},`p3-${a.slotKey}`))]})})}const v=28,w=22,O=780,de=430,p=16,B=de-p-28,A=B-w-6,q=100,L=q+30,D=p+38,ce=O-p-4,ee=390,ae=20,ye=ce-v,je=q+20,st=je+w+2,ie={};let k=ce;[3,4,5,6,7,8,9].forEach(t=>{k-=v,ie[t]=k,k-=1});const Se=48,ke=k-Se;k=ke;[10,11,12,13,14,15,16].forEach(t=>{k-=v,ie[t]=k,k-=1});const we=32,Ce=k-we;k=Ce;[17,18,19,20,21].forEach(t=>{k-=v,ie[t]=k,k-=1});const Be=36,it=k-Be,te={};let U=ee;[22,23,24,25,26,27].forEach(t=>{U-=v,te[t]=U,U-=1});U=ee+ae;[28,29,30,31].forEach(t=>{te[t]=U,U+=v+1});const Ae=470,We=q-50,ve=560,ze=q-50,Fe=380,Ne=q-70;function ot({slot:t,info:s,onEnter:o,onMove:i,onLeave:n}){const[r,l]=b.useState(!1),a=s?.estado??"libre",c=W[a]??W.libre,f=t.w??v,h=t.h??w;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:j=>{l(!0),o(j,String(t.num))},onMouseMove:i,onMouseLeave:()=>{l(!1),n()},children:[e.jsx("rect",{x:t.x,y:t.y,width:f,height:h,rx:2,fill:c.fill,stroke:r?c.strokeH:c.stroke,strokeWidth:r?2:1,style:{filter:r?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+f/2,y:t.y+h/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:c.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function P({x:t,y:s,w:o,h:i,lines:n=[],fontSize:r=8,dashed:l=!1}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1,strokeDasharray:l?"4,3":void 0}),n.map((a,c)=>e.jsx("text",{x:t+o/2,y:s+i/2+(c-(n.length-1)/2)*(r+3),textAnchor:"middle",dominantBaseline:"middle",fontSize:r,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:.3,children:a},c))]})}const rt=[{num:1,x:ye,y:je},{num:2,x:ye,y:st},...[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map(t=>({num:t,x:ie[t],y:A})),...[22,23,24,25,26].map(t=>({num:t,x:te[t],y:L})),...[27,28,29,30,31].map(t=>({num:t,x:te[t],y:L})),{num:32,x:Ae,y:We,h:w+10},{num:37,x:ve,y:ze,h:w+10},...[33,34,35,36].map((t,s)=>({num:t,x:Fe+s*(v+1),y:Ne-w-4}))];function lt({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:16,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:O,height:de,viewBox:`0 0 ${O} ${de}`,children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr4",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#C8A84B"})})}),e.jsx("rect",{x:p+36,y:p,width:O-p-40,height:B-p,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:p,y:p,width:36,height:B-p,rx:3,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:p+18,y:p+(B-p)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:2,transform:`rotate(-90,${p+18},${p+(B-p)/2})`,children:"CANARIO"}),e.jsx("rect",{x:p+36,y:B,width:O-p-40,height:28,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:(O+p+36)/2,y:B+14,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,children:"PROLONGACIÃ“N CALLE 4"}),e.jsx(P,{x:D+2,y:80,w:160,h:80,lines:["PROTECCIÃ“N","CIVIL"],fontSize:9}),e.jsx(P,{x:D+164,y:95,w:80,h:65,lines:["SUBES-","TACIÃ“N"],fontSize:8}),e.jsx(P,{x:Fe,y:Ne,w:90,h:50,lines:["OFICINA"],fontSize:9}),e.jsx("rect",{x:O-p-42,y:110,width:40,height:B-p-110+10,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:O-p-22,y:110+(B-p-110+10)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${O-p-22},${110+(B-p-110+10)/2})`,children:"FORO DEL OLIVAR"}),e.jsx("rect",{x:ee,y:L,width:ae,height:w,fill:"#F9F2F4",stroke:"#c5a0aa",strokeWidth:1,rx:1}),e.jsx("text",{x:ee+ae/2,y:L+w/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",children:"+"}),e.jsx("text",{x:Ae+v/2,y:We-7,textAnchor:"middle",fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:ve+v/2,y:ze-7,textAnchor:"middle",fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:D+6,y:A-12,fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${D+6},${A-12})`,children:"Entrada"}),e.jsx("line",{x1:D+18,y1:A-4,x2:D+50,y2:A-4,stroke:"#C8A84B",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr4)"}),e.jsx(P,{x:it,y:A,w:Be,h:w,lines:["CASETA"],fontSize:7}),e.jsx(P,{x:Ce,y:A,w:we,h:w,lines:["JARDÃN"],fontSize:6}),e.jsx(P,{x:ke,y:A,w:Se,h:w,lines:["OFICINA"],fontSize:7}),e.jsx("line",{x1:D+36,y1:A-18,x2:ce,y2:A-18,stroke:"#ddd0d4",strokeWidth:.5,strokeDasharray:"5,4"}),rt.map(n=>e.jsx(ot,{slot:n,info:t[String(n.num)],onEnter:s,onMove:o,onLeave:i},`p4-${n.num}`))]})})}const Y=24,m=18,y=1;function d({nums:t,x:s,y:o,cols:i=1,data:n,onEnter:r,onMove:l,onLeave:a,border:c=!0}){const f=Math.ceil(t.length/i),h=i*Y+(i-1)*y+6,j=f*m+(f-1)*y+6;return e.jsxs("g",{children:[c&&e.jsx("rect",{x:s,y:o,width:h,height:j,rx:2,fill:"none",stroke:"#c5a0aa",strokeWidth:1}),t.map((x,g)=>{const X=g%i,C=Math.floor(g/i);return e.jsx(E,{num:x,x:s+3+X*(Y+y),y:o+3+C*(m+y),info:n[String(x)],onEnter:r,onMove:l,onLeave:a},`p5-${x}`)})]})}function E({num:t,x:s,y:o,w:i=Y,h:n=m,info:r,onEnter:l,onMove:a,onLeave:c}){const[f,h]=b.useState(!1),j=r?.estado??"libre",x=W[j]??W.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:g=>{h(!0),l(g,String(t))},onMouseMove:a,onMouseLeave:()=>{h(!1),c()},children:[e.jsx("rect",{x:s,y:o,width:i,height:n,rx:2,fill:x.fill,stroke:f?x.strokeH:x.stroke,strokeWidth:f?2:1,style:{filter:f?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:s+i/2,y:o+n/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:6.5,fill:x.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t})]})}function K({x:t,y:s,w:o,h:i,label:n="",sub:r,italic:l}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:t+o/2,y:s+i/2-(r?6:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#4a6080",fontFamily:"'Courier New',monospace",fontStyle:l?"italic":"normal",children:n}),r&&e.jsx("text",{x:t+o/2,y:s+i/2+8,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:"#4a6080",fontFamily:"'Courier New',monospace",children:r})]})}function nt({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#fff",border:"2px solid #691C32",borderRadius:14,padding:12,boxShadow:"0 4px 20px rgba(105,28,50,0.08)",overflowX:"auto",display:"flex",justifyContent:"center"},children:e.jsxs("svg",{width:920,height:560,viewBox:"0 0 920 560",children:[e.jsx("rect",{x:16,y:14,width:824,height:506,fill:"none",stroke:"#ddd0d4",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:16,y:520,width:824,height:26,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1}),e.jsx("text",{x:856/2,y:533,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#691C32",fontFamily:"'Courier New',monospace",letterSpacing:3,fontWeight:"700",children:"CALLE ANCONITANOS"}),e.jsx("rect",{x:844,y:112,width:52,height:408,rx:3,fill:"#f9f2f4",stroke:"#c5a0aa",strokeWidth:1.5}),e.jsx("text",{x:844+52/2,y:112+408/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#4a6080",fontFamily:"'Courier New',monospace",letterSpacing:1.5,transform:`rotate(-90,${844+52/2},${112+408/2})`,children:"Av. Central"}),e.jsx(K,{x:844,y:14,w:52,h:95,label:"ENTRADA",sub:"/ SALIDA"}),e.jsx(K,{x:19,y:17,w:215,h:130,label:"Edificio",italic:!0}),e.jsx(K,{x:328,y:17,w:90,h:65,label:"Edificio",italic:!0}),e.jsx(K,{x:440,y:17,w:200,h:58}),e.jsx(K,{x:648,y:17,w:48,h:58}),e.jsx(K,{x:702,y:17,w:60,h:58}),e.jsx(E,{num:250,x:19,y:152,w:28,h:m,info:t[250],onEnter:s,onMove:o,onLeave:i}),e.jsx(E,{num:249,x:51,y:152,w:65,h:m,info:t[249],onEnter:s,onMove:o,onLeave:i}),e.jsx(E,{num:248,x:120,y:152,w:60,h:m,info:t[248],onEnter:s,onMove:o,onLeave:i}),e.jsx(E,{num:247,x:184,y:152,w:52,h:m,info:t[247],onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[246,245],x:328,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[244,243],x:328+Y+y+8,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[242,241],x:420,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[240,239,238,237,236,235,234,233,232,231],x:440,y:77,cols:10,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[230,229],x:708,y:77,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[228],x:766,y:77,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx("text",{x:20,y:215,fontSize:8,fill:"#9e7a83",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx(d,{nums:[129,128,131,130],x:32,y:206,cols:4,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[133,132],x:32+2*(Y+y)+8,y:206+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[135,134],x:126,y:288,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[137,136],x:126,y:288+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[139,138],x:126,y:342,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[141,140],x:126,y:342+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[143,142],x:126,y:400,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[145,144],x:126,y:400+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[171,170],x:310,y:246,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[173,175],x:338,y:222,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[172,174],x:338,y:222+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[167,166],x:310,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[169,168],x:370,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[159,158],x:310,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[163,162],x:310,y:358+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[165,164],x:370,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[161,160],x:370,y:358+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[151,150],x:310,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[155,154],x:310,y:416+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[157,156],x:370,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[153,152],x:370,y:416+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[147,146],x:310,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[149,148],x:370,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[177,176],x:448,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[179,178],x:448,y:224,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[181,180],x:448,y:250,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(E,{num:182,x:508,y:198,w:Y,h:m*2+y+6,info:t[182],onEnter:s,onMove:o,onLeave:i}),e.jsx(E,{num:183,x:508,y:284,w:Y,h:m*2+y+6,info:t[183],onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[197,196,195,194],x:546,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[193,192,191,190],x:546,y:248,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[189,188,187,186],x:546,y:360,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[185,184],x:546,y:440,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[199,198],x:658,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[201,200],x:658,y:178+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[205,203],x:658,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[204,202],x:658,y:244+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[207,206],x:658,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[209,208],x:658,y:318+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[211,210],x:658,y:396,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[213,212],x:658,y:396+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[214],x:658,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[215],x:658+Y+y+30,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[226,227],x:720,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[224,225],x:720,y:178+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[222,223],x:720,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[220,221],x:720,y:244+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[218,219],x:720,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(d,{nums:[216,217],x:720,y:318+m+y+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i})]})})}const ue=[{id:1,label:"Estacionamiento 1",sublabel:"ESTACIONAMIENTO CALLE 10"},{id:2,label:"Estacionamiento 2",sublabel:"ESTACIONAMIENTO CANARIOS"},{id:3,label:"Estacionamiento 3",sublabel:"ESTACIONAMIENTO MEDIO AMBIENTE"},{id:4,label:"Estacionamiento 4",sublabel:"ESTACIONAMIENTO OBRAS"},{id:5,label:"Estacionamiento 5",sublabel:"ESTACIONAMIENTO PAGADURIA"}];function dt(){const[t,s]=b.useState(typeof window<"u"?window.innerWidth:1200);return b.useEffect(()=>{const o=()=>s(window.innerWidth);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),t}const at={1:[...[1,2,3,4,5,6,7].map(String),...[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35].map(String),...[64,65,66,63,62,61,60,59].map(String),...[58,57,56,55,54,53,52].map(String),...[51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36].map(String),"139B","140B","141B","142B","143B","144B","145B","146B","147B","148B",...[67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92].map(String),"136B","135B","134B","133B","132B","131B","130B","129B","128B",...[127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93].map(String),"138B","137B"],2:[...[335,336,337,338,339,340,341,342,343,344,345,346].map(String),...[309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334].map(String),...[283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308].map(String),...[251,252,253,254,255,256,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282].map(String)],3:[1,2,3,4,5,6,7,8,9,10].map(String),4:Array.from({length:37},(t,s)=>String(s+1)),5:[...[250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,234,233,232,231,230,229,228].map(String),...[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145].map(String),...[146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175].map(String),...[176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197].map(String),...[198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215].map(String),...[216,217,218,219,220,221,222,223,224,225,226,227].map(String)]},se={libre:{bg:"#eaf3eb",border:"#2e7d32",text:"#1b5e20",label:"Libre"},ocupado:{bg:"#faeaee",border:"#691C32",text:"#691C32",label:"Ocupado"},reservado:{bg:"#fdf8ec",border:"#C8A84B",text:"#6b4f00",label:"Reservado"}};function ct({slotKey:t,info:s,onClose:o}){if(!t)return null;const i=s?.estado??"libre",n=se[i]??se.libre,r=[{icon:"person",label:"Nombre",value:s?.nombre},{icon:"car",label:"Placa",value:s?.placa,mono:!0},{icon:"tool",label:"Modelo",value:s?.modelo},{icon:"phone",label:"Telefono",value:s?.telefono,mono:!0},{icon:"note",label:"Notas",value:s?.notas}].filter(a=>a.value),l={person:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4"}),e.jsx("path",{d:"M4 20c0-4 3.6-7 8-7s8 3 8 7"})]}),car:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"11",width:"22",height:"9",rx:"2"}),e.jsx("path",{d:"M5 11l2-5h10l2 5"}),e.jsx("circle",{cx:"7",cy:"20",r:"1.5"}),e.jsx("circle",{cx:"17",cy:"20",r:"1.5"})]}),tool:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),phone:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12a19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 3.6 1.27h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L7.91 8.91a16 16 0 0 0 6 6l.91-.91a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 21.73 16.92z"})}),note:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:o,style:{position:"fixed",inset:0,zIndex:900,background:"rgba(60,10,20,0.5)",backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"}}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:901,background:"#fff",borderRadius:"22px 22px 0 0",border:"2px solid #691C32",borderBottom:"none",boxShadow:"0 -10px 50px rgba(105,28,50,0.25)",fontFamily:"'Syne',system-ui,sans-serif",animation:"cdmxUp 0.28s cubic-bezier(.32,1.1,.58,1)",maxHeight:"90vh",overflowY:"auto"},children:[e.jsx("style",{children:"@keyframes cdmxUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"14px 0 6px"},children:e.jsx("div",{style:{width:44,height:5,background:"#ddd0d4",borderRadius:3}})}),e.jsx("div",{style:{height:4,background:"linear-gradient(90deg,#691C32 70%,#C8A84B 100%)",margin:"8px 20px 20px",borderRadius:2}}),e.jsxs("div",{style:{padding:"0 20px 32px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:22},children:[e.jsx("div",{style:{width:62,height:62,borderRadius:14,background:n.bg,border:"2.5px solid "+n.border,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"monospace",fontWeight:900,fontSize:20,color:n.text,flexShrink:0},children:t}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:10,color:"#9e7a83",fontFamily:"monospace",letterSpacing:1.5,textTransform:"uppercase",marginBottom:6},children:["CAJON #",t]}),e.jsx("span",{style:{display:"inline-block",background:n.border,color:"#fff",padding:"5px 16px",borderRadius:20,fontSize:12,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:n.label})]}),e.jsx("button",{onClick:o,style:{width:38,height:38,borderRadius:"50%",background:"#f9f2f4",border:"1.5px solid #ddd0d4",color:"#691C32",fontSize:22,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,lineHeight:1},children:"Ã—"})]}),i==="libre"?e.jsxs("div",{style:{background:"#eaf3eb",border:"1.5px solid #2e7d32",borderRadius:14,padding:"24px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:8},children:"ðŸŸ¢"}),e.jsx("div",{style:{fontWeight:800,color:"#1b5e20",fontSize:18},children:"CajÃ³n disponible"}),e.jsx("div",{style:{color:"#4a8c57",fontSize:13,marginTop:4,fontFamily:"monospace"},children:"Sin vehÃ­culo registrado"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:r.length>0?r.map(a=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,background:"#F4EFE9",borderRadius:12,padding:"13px 16px"},children:[e.jsx("div",{style:{flexShrink:0},children:l[a.icon]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:9,color:"#9e7a83",fontFamily:"monospace",letterSpacing:1.5,textTransform:"uppercase",marginBottom:3},children:a.label}),e.jsx("div",{style:{fontSize:15,fontWeight:700,color:"#3b1a22",fontFamily:a.mono?"monospace":"inherit",letterSpacing:a.mono?2:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.value})]})]},a.label)):e.jsx("div",{style:{background:"#F4EFE9",borderRadius:12,padding:"20px",textAlign:"center",color:"#9e7a83",fontSize:13,fontFamily:"monospace"},children:"Sin informaciÃ³n adicional"})})]})]})]})}function xt({pisoActivo:t,data:s,cols:o}){const[i,n]=b.useState("todos"),[r,l]=b.useState(null),a=at[t]||[],c=a.filter(x=>(s[x]?.estado??"libre")==="libre").length,f=a.filter(x=>s[x]?.estado==="ocupado").length,h=a.filter(x=>s[x]?.estado==="reservado").length,j=a.filter(x=>i==="todos"||(s[x]?.estado??"libre")===i);return e.jsxs("div",{style:{width:"100%"},children:[e.jsx(ct,{slotKey:r,info:s[r]??{},onClose:()=>l(null)}),e.jsx("div",{style:{display:"flex",gap:8,marginBottom:16,flexWrap:"wrap"},children:[{k:"todos",l:"Todos ("+a.length+")",bg:"#fff",fg:"#691C32",br:"#691C32"},{k:"libre",l:"Libres ("+c+")",bg:"#eaf3eb",fg:"#1b5e20",br:"#2e7d32"},{k:"ocupado",l:"Ocupados ("+f+")",bg:"#faeaee",fg:"#691C32",br:"#8B2442"},{k:"reservado",l:"Reservados ("+h+")",bg:"#fdf8ec",fg:"#6b4f00",br:"#C8A84B"}].map(x=>e.jsx("button",{onClick:()=>n(x.k),style:{background:i===x.k?x.fg:x.bg,color:i===x.k?"#fff":x.fg,border:"1.5px solid "+x.br,borderRadius:20,padding:"6px 14px",fontSize:12,fontWeight:700,fontFamily:"monospace",cursor:"pointer",transition:"all 0.15s"},children:x.l},x.k))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat("+o+",1fr)",gap:10},children:j.map(x=>{const g=s[x]??{},X=g.estado??"libre",C=se[X]??se.libre;return e.jsxs("div",{onClick:()=>l(x),style:{background:C.bg,border:"1.5px solid "+C.border,borderRadius:12,padding:"12px 14px",display:"flex",alignItems:"center",gap:11,cursor:"pointer",transition:"transform 0.1s",WebkitTapHighlightColor:"transparent"},onTouchStart:z=>z.currentTarget.style.transform="scale(0.97)",onTouchEnd:z=>z.currentTarget.style.transform="",children:[e.jsx("div",{style:{minWidth:44,height:44,borderRadius:10,background:"#fff",border:"2px solid "+C.border,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"monospace",fontWeight:900,fontSize:13,color:C.text,flexShrink:0},children:x}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:700,color:C.text,fontSize:14,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:X==="libre"?"Disponible":g.nombre||"â€”"}),X!=="libre"&&g.placa&&e.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"#9e7a83",letterSpacing:1,marginTop:2},children:[g.placa,g.modelo?" Â· "+g.modelo:""]})]}),e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:C.border,strokeWidth:"2.5",style:{flexShrink:0},children:e.jsx("polyline",{points:"9 18 15 12 9 6"})})]},x)})}),j.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"#9e7a83",fontFamily:"monospace",fontSize:13},children:"Sin cajones con ese estado"})]})}function pt(){const[t,s]=b.useState(1),[o,i]=b.useState(!1),[n,r]=b.useState({visible:!1,x:0,y:0,slotKey:"",info:null}),l=dt(),a=l<768,c=l>=768&&l<1100,{data:f,stats:h,sync:j,time:x}=Ze(t),g=ue.find(u=>u.id===t),X={idle:"#c5a0aa",loading:"#C8A84B",ok:"#2e7d32",error:"#691C32"}[j],C=j==="loading"?"pulse 1s infinite":"none",z=b.useCallback((u,H)=>{const F=f[H]??{estado:"libre"},$=ge(u.clientX,u.clientY);r({visible:!0,...$,slotKey:H,info:F})},[f]),G=b.useCallback(u=>{const H=ge(u.clientX,u.clientY);r(F=>F.visible?{...F,...H}:F)},[]),M=b.useCallback(()=>{r(u=>({...u,visible:!1}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;700;800&display=swap');
                @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
                *{box-sizing:border-box;}
                .floor-menu{position:relative;display:inline-block;}
                .floor-btn{
                    display:flex;align-items:center;gap:10px;
                    background:#fff;border:2px solid #691C32;
                    color:#691C32;border-radius:8px;padding:10px 16px;
                    cursor:pointer;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;
                    transition:all 0.15s;
                }
                .floor-btn:hover{background:#691C32;color:#fff;}
                .floor-badge{
                    background:#faeaee;color:#691C32;
                    border:1px solid #C8A84B;border-radius:6px;
                    padding:2px 8px;font-size:12px;font-family:monospace;font-weight:700;
                }
                .floor-dropdown{
                    position:absolute;top:calc(100% + 6px);left:0;
                    background:#fff;border:2px solid #691C32;
                    border-radius:10px;min-width:260px;z-index:500;
                    box-shadow:0 8px 32px rgba(105,28,50,0.15);overflow:hidden;
                }
                .floor-option{
                    display:flex;flex-direction:column;gap:2px;
                    padding:12px 16px;cursor:pointer;
                    transition:background 0.12s;border-bottom:1px solid #f0e4e8;
                    font-family:'Syne',sans-serif;
                }
                .floor-option:last-child{border-bottom:none;}
                .floor-option:hover{background:#faeaee;}
                .floor-option.active{background:#691C32;}
                .floor-option.active .floor-option-label{color:#fff;}
                .floor-option.active .floor-option-sub{color:#C8A84B;}
                .floor-option-label{font-size:14px;font-weight:700;color:#691C32;}
                .floor-option-sub{font-size:11px;color:#9e7a83;font-family:monospace;}
                .chevron{transition:transform 0.2s;}
                .chevron.open{transform:rotate(180deg);}
                .map-center{display:flex;justify-content:center;width:100%;overflow-x:auto;}
                @media(max-width:767px){
                    .floor-btn{padding:7px 10px;font-size:12px;}
                    .floor-badge{font-size:11px;}
                    .hdr-sublabel{display:none;}
                    .stats-bar{display:none!important;}
                }
                @media(max-width:1099px){
                    .floor-btn{font-size:13px;}
                }
            `}),e.jsxs("div",{style:{background:"#F4EFE9",minHeight:"100vh",padding:24,fontFamily:"'Syne',system-ui,sans-serif",color:"#691C32"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:28,paddingBottom:20,borderBottom:"3px solid #691C32",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0,borderRadius:3,overflow:"hidden"},children:[e.jsx("div",{style:{width:7,height:22,background:"#691C32"}}),e.jsx("div",{style:{width:7,height:9,background:"#C8A84B"}})]}),e.jsx("div",{children:e.jsx("img",{src:"/img/logo.svg",alt:"Logo Institucional",style:{height:70}})}),e.jsxs("div",{className:"floor-menu",style:{marginLeft:8},children:[e.jsxs("button",{className:"floor-btn",onClick:()=>i(u=>!u),children:[e.jsx("span",{className:"floor-badge",children:g?.label}),e.jsx("span",{className:"hdr-sublabel",style:{fontSize:12,color:"#9e7a83",fontFamily:"monospace"},children:g?.sublabel}),e.jsx("svg",{className:`chevron${o?" open":""}`,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#691C32",strokeWidth:"2.5",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:499},onClick:()=>i(!1)}),e.jsx("div",{className:"floor-dropdown",children:ue.map(u=>e.jsxs("div",{className:`floor-option${t===u.id?" active":""}`,onClick:()=>{s(u.id),i(!1)},children:[e.jsx("span",{className:"floor-option-label",children:u.label}),e.jsx("span",{className:"floor-option-sub",children:u.sublabel})]},u.id))})]})]})]}),e.jsxs("div",{className:"stats-bar",style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[[{color:"#1b5e20",bg:"#eaf3eb",border:"#2e7d32",label:`${h.libres} Libres`},{color:"#691C32",bg:"#faeaee",border:"#8B2442",label:`${h.ocupados} Ocupados`},{color:"#6b4f00",bg:"#fdf8ec",border:"#C8A84B",label:`${h.reservados} Reservados`}].map(({color:u,bg:H,border:F,label:$})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:7,fontFamily:"monospace",fontSize:13,fontWeight:700,background:H,border:`1px solid ${F}`,borderRadius:6,padding:"5px 12px",color:u},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:2,background:u}}),e.jsx("span",{children:$})]},$)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontFamily:"monospace",fontSize:12,color:"#9e7a83",background:"#fff",border:"1px solid #ddd0d4",borderRadius:6,padding:"5px 10px"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:X,animation:C}}),e.jsxs("span",{children:[j==="loading"&&"Actualizandoâ€¦",j==="ok"&&`Sync ${x}`,j==="error"&&"Sin conexiÃ³n",j==="idle"&&"â€”"]})]})]})]}),a&&e.jsx("div",{style:{display:"flex",gap:8,marginBottom:16,flexWrap:"wrap"},children:[{color:"#1b5e20",bg:"#eaf3eb",border:"#2e7d32",label:h.libres+" Libres"},{color:"#691C32",bg:"#faeaee",border:"#8B2442",label:h.ocupados+" Ocupados"},{color:"#6b4f00",bg:"#fdf8ec",border:"#C8A84B",label:h.reservados+" Reservados"}].map(({color:u,bg:H,border:F,label:$})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontFamily:"monospace",fontSize:12,fontWeight:700,background:H,border:"1px solid "+F,borderRadius:6,padding:"4px 10px",color:u},children:[e.jsx("div",{style:{width:7,height:7,borderRadius:2,background:u}}),e.jsx("span",{children:$})]},$))}),a||c?e.jsx(xt,{pisoActivo:t,data:f,cols:c?2:1}):e.jsxs("div",{className:"map-center",children:[t===1&&e.jsx($e,{data:f,onEnter:z,onMove:G,onLeave:M}),t===2&&e.jsx(Qe,{data:f,onEnter:z,onMove:G,onLeave:M}),t===3&&e.jsx(tt,{data:f,onEnter:z,onMove:G,onLeave:M}),t===4&&e.jsx(lt,{data:f,onEnter:z,onMove:G,onLeave:M}),t===5&&e.jsx(nt,{data:f,onEnter:z,onMove:G,onLeave:M})]})]}),e.jsx(Ie,{...n})]})}function ge(t,s){return{x:t+16+220>window.innerWidth?t-220-16:t+16,y:s-10+130>window.innerHeight?s-130:s-10}}export{pt as default};
