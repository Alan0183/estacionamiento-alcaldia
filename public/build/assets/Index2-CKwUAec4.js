import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as j}from"./app-BMQbkYCC.js";const Ce="/api/parking/map-data",He=15e3,N={libre:{fill:"#0f2d1a",stroke:"#238636",strokeH:"#2ea043",text:"#3fb950"},ocupado:{fill:"#2d0f0f",stroke:"#da3633",strokeH:"#f85149",text:"#f85149"},reservado:{fill:"#2d1f00",stroke:"#9e6a03",strokeH:"#d29922",text:"#d29922"}},le={libre:{bg:"#0f2d1a",color:"#2ea043",border:"#238636",label:"Libre"},ocupado:{bg:"#2d0f0f",color:"#f85149",border:"#da3633",label:"Ocupado"},reservado:{bg:"#2d1f00",color:"#d29922",border:"#9e6a03",label:"Reservado"}};function Oe({visible:t,x:s,y:o,slotKey:i,info:x}){if(!t)return null;const n=x?.estado??"libre",r=le[n]??le.libre;return e.jsxs("div",{style:{position:"fixed",left:s,top:o,zIndex:1e3,background:"#1c2128",border:"1px solid #30363d",borderRadius:10,padding:"14px 18px",pointerEvents:"none",minWidth:210,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",fontFamily:"'Syne',system-ui,sans-serif"},children:[e.jsxs("div",{style:{fontFamily:"monospace",fontSize:11,color:"#8b949e",textTransform:"uppercase",letterSpacing:1,marginBottom:6},children:["CAJÓN #",i]}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#f0f6fc",marginBottom:4},children:n==="libre"?"Disponible":x?.nombre||"—"}),n!=="libre"&&e.jsx("div",{style:{fontFamily:"monospace",fontSize:13,color:"#58a6ff",letterSpacing:2,marginBottom:4},children:n==="ocupado"?x?.placa||"—":x?.notas||"—"}),n==="ocupado"&&x?.phone&&e.jsx("div",{style:{fontSize:13,color:"#58a6ff",marginBottom:6},children:x.phone}),e.jsx("span",{style:{display:"inline-block",fontSize:11,fontWeight:700,padding:"3px 10px",borderRadius:20,textTransform:"uppercase",letterSpacing:1,marginTop:4,background:r.bg,color:r.color,border:`1px solid ${r.border}`},children:r.label})]})}const H=26,Te=36,ze=1;function C(t,s,o,i=H,x=Te,n=""){return t.map((r,c)=>({num:r,x:s+c*(i+ze),y:o,w:i,h:x,suffix:n,slotKey:n?`${r}${n}`:String(r)}))}const Ie=[...C([1,2,3,4,5,6,7],80,12),...C([8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],530,12),...[64,65,66].map((t,s)=>({num:t,x:80,y:148+s*34,w:H,h:30,suffix:"",slotKey:String(t)})),...C([63,62,61,60,59],112,148,H,90),...C([58,57,56,55,54,53,52],904,148,H,90),...C([51,50,49,48,47,46,45,44,43,42,41,40,39,38,37,36],1112,148,H,90),...C([139,140,141,142,143,144,145,146,147,148],112,248,H,70,"B"),...C([67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92],430,248,H,70),...C([136,135,134,133,132,131,130,129,128],80,358,H,50,"B"),...C([127,126,125,124,123,122,121,120,119,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,103,102,101,100,99,98,97,96,95,94,93],330,358,H,50),{num:138,x:56,y:248,w:22,h:70,suffix:"B",slotKey:"138B"},{num:137,x:56,y:358,w:22,h:50,suffix:"B",slotKey:"137B"}];function Fe({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),c=s?.estado??"libre",d=N[c]??N.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:t.w,height:t.h,rx:3,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1.5,style:{filter:n?"brightness(1.6)":"none",transition:"filter 0.15s"}}),e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2-(t.suffix?5:0),fontSize:8,fill:d.text,textAnchor:"middle",dominantBaseline:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:t.num}),t.suffix&&e.jsx("text",{x:t.x+t.w/2,y:t.y+t.h/2+8,fontSize:8,fill:d.text,textAnchor:"middle",fontFamily:"monospace",style:{pointerEvents:"none",userSelect:"none"},children:"B"})]})}function Xe({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#161b22",border:"1px solid #30363d",borderRadius:12,padding:20,overflowX:"auto"},children:e.jsxs("svg",{viewBox:"0 0 1560 430",xmlns:"http://www.w3.org/2000/svg",style:{display:"block",minWidth:1400},children:[e.jsx("rect",{x:"2",y:"2",width:"50",height:"90",fill:"#161b22",stroke:"#58a6ff",strokeWidth:1.5,rx:4}),e.jsx("text",{x:"27",y:"47",fontSize:9,fontWeight:700,fill:"#58a6ff",textAnchor:"middle",dominantBaseline:"middle",transform:"rotate(-90,27,47)",style:{letterSpacing:2,fontFamily:"Syne,sans-serif"},children:"ENTRADA"}),e.jsx("text",{x:"380",y:"120",fontSize:10,fill:"#444c56",textAnchor:"middle",fontFamily:"monospace",style:{letterSpacing:2},children:"PASILLO CENTRAL"}),e.jsx("rect",{x:"55",y:"2",width:"1498",height:"420",fill:"none",stroke:"#21262d",strokeWidth:1.5,rx:4}),e.jsx("line",{x1:"55",y1:"230",x2:"1553",y2:"230",stroke:"#21262d",strokeWidth:1,strokeDasharray:"4,4"}),e.jsx("line",{x1:"55",y1:"340",x2:"1553",y2:"340",stroke:"#21262d",strokeWidth:1,strokeDasharray:"4,4"}),Ie.map(x=>e.jsx(Fe,{slot:x,info:t[x.slotKey],onEnter:s,onMove:o,onLeave:i},`p1-${x.slotKey}`))]})})}const L=28,K=22,ye=1;function z(t,s,o){return t.map((i,x)=>({num:i,x:s+x*(L+ye),y:o,slotKey:String(i)}))}const g=60,G=K+ye,Ye=[344,342,340,338,336],Re=[343,341,339,337,335],J=g+370,V=80,$e=[{num:346,x:J-30,y:V,slotKey:"346"},{num:345,x:J-30,y:V+G,slotKey:"345"}],De=[309,311,313,315,317,319,321,323,325,327,329,331,333],Pe=[310,312,314,316,318,320,322,324,326,328,330,332,334],ne=g,ee=195,Ke=[308,306,304,302,300,298,296,294,292,290,288,286,284],Ee=[307,305,303,301,299,297,295,293,291,289,287,285,283],xe=g,te=310,ve=[252,254,256,262,264,266,268,270,272,274,276,278,280,282],_e=[251,253,255,261,263,265,267,269,271,273,275,277,279,281],de=g,se=420,Ge=[...$e,...z(Ye,J,V),...z(Re,J,V+G),...z(De,ne,ee),...z(Pe,ne,ee+G),...z(Ke,xe,te),...z(Ee,xe,te+G),...z(ve,de,se),...z(_e,de,se+G)];function Ue({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),c=s?.estado??"libre",d=N[c]??N.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:L,height:K,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+L/2,y:t.y+K/2+4,textAnchor:"middle",fontSize:8,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"600",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function Je({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#0f172a",border:"1px solid #1e293b",borderRadius:12,padding:20,boxShadow:"0 0 60px rgba(245,158,11,0.05)",overflowX:"auto"},children:e.jsxs("svg",{width:700,height:510,viewBox:"0 0 700 510",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrow2",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#f59e0b"})})}),e.jsx("text",{x:18,y:510/2,fontSize:9,fill:"#64748b",fontFamily:"monospace",textAnchor:"middle",transform:`rotate(-90,18,${510/2})`,letterSpacing:2,children:"ENTRADA"}),e.jsx("line",{x1:30,y1:510/2,x2:45,y2:510/2,stroke:"#f59e0b",strokeWidth:1.5,markerEnd:"url(#arrow2)"}),e.jsx("rect",{x:g+140,y:10,width:100,height:55,rx:4,fill:"#0f172a",stroke:"#334155",strokeWidth:1,strokeDasharray:"3,2"}),e.jsx("text",{x:g+190,y:43,textAnchor:"middle",fontSize:11,fill:"#64748b",fontFamily:"monospace",letterSpacing:1,children:"MOTOS"}),e.jsx("rect",{x:g+270,y:10,width:90,height:40,rx:4,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("line",{x1:g,y1:185,x2:g+700-120,y2:185,stroke:"#1e293b",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:g,y1:300,x2:g+700-120,y2:300,stroke:"#1e293b",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:g,y1:410,x2:g+700-120,y2:410,stroke:"#1e293b",strokeWidth:.5,strokeDasharray:"4,4"}),[{x:g-20,y:ee+K*1.5,t:"A"},{x:g-20,y:te+K*1.5,t:"B"},{x:g-20,y:se+K*1.5,t:"C"}].map(r=>e.jsx("text",{x:r.x,y:r.y,fontSize:9,fill:"#475569",fontFamily:"monospace",textAnchor:"middle",letterSpacing:1,children:r.t},r.t)),Ge.map(r=>e.jsx(Ue,{slot:r,info:t[r.slotKey],onEnter:s,onMove:o,onLeave:i},`p2-${r.slotKey}`))]})})}function Ve(t){const[s,o]=j.useState({}),[i,x]=j.useState({libres:0,ocupados:0,reservados:0}),[n,r]=j.useState("idle"),[c,d]=j.useState(""),y=j.useCallback(async()=>{r("loading");try{const m=await fetch(`${Ce}?piso=${t}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!m.ok)throw new Error(`HTTP ${m.status}`);const k=await m.json();o(k);const b=Object.values(k);x({libres:b.filter(p=>p.estado==="libre").length,ocupados:b.filter(p=>p.estado==="ocupado").length,reservados:b.filter(p=>p.estado==="reservado").length}),r("ok"),d(new Date().toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))}catch(m){console.error(m),r("error")}},[t]);return j.useEffect(()=>{o({}),x({libres:0,ocupados:0,reservados:0}),r("idle"),y();const m=setInterval(y,He);return()=>clearInterval(m)},[y]),{data:s,stats:i,sync:n,time:c,refetch:y}}const T=30,ce=40,qe=[{num:4,x:75,y:175,slotKey:"4"},{num:3,x:75,y:175+(T+1),slotKey:"3"},{num:2,x:75,y:175+(T+1)*2,slotKey:"2"},{num:1,x:75,y:175+(T+1)*3,slotKey:"1"},{num:5,x:130,y:100,slotKey:"5"},{num:6,x:130+(T+1),y:100,slotKey:"6"},{num:7,x:345,y:100,slotKey:"7"},{num:8,x:345+(T+1),y:100,slotKey:"8"},{num:9,x:345+(T+1)*2,y:100,slotKey:"9"},{num:10,x:345+(T+1)*3,y:100,slotKey:"10"}];function Qe({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),c=s?.estado??"libre",d=N[c]??N.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:y=>{r(!0),o(y,t.slotKey)},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:T,height:ce,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+T/2,y:t.y+ce/2+4,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function _({x:t,y:s,w:o,h:i,label:x,sublabel:n,fontSize:r=9}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("text",{x:t+o/2,y:s+i/2-(n?7:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:r,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:.5,children:x}),n&&n.map((c,d)=>e.jsx("text",{x:t+o/2,y:s+i/2+(d-n.length/2+1)*11+3,textAnchor:"middle",dominantBaseline:"middle",fontSize:r-1,fill:"#64748b",fontFamily:"'Courier New',monospace",children:c},d))]})}function Ze({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#0d1526",border:"1px solid #1e293b",borderRadius:14,padding:16,boxShadow:"0 0 80px rgba(245,158,11,0.04)",overflowX:"auto"},children:e.jsxs("svg",{width:720,height:380,viewBox:"0 0 720 380",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr3",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#f59e0b"})})}),e.jsx("rect",{x:20,y:20,width:680,height:310,rx:4,fill:"none",stroke:"#1e293b",strokeWidth:1.5}),e.jsx("rect",{x:20,y:330,width:680,height:28,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("text",{x:720/2,y:344,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#475569",fontFamily:"'Courier New',monospace",letterSpacing:3,children:"PARQUE DE LA JUVENTUD"}),e.jsx(_,{x:220,y:30,w:110,h:55,label:"KIOSKO"}),e.jsx(_,{x:460,y:30,w:120,h:55,label:"ENTRADA",sublabel:["POR CALLE 4"]}),e.jsx(_,{x:22,y:70,w:100,h:55,label:"OFICINAS",sublabel:["MEDIO","AMBIENTE"],fontSize:8}),e.jsx("rect",{x:658,y:110,width:40,height:210,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("text",{x:678,y:110+210/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,678,${110+210/2})`,children:"FORO DEL OLIVAR"}),e.jsx(_,{x:22,y:175,w:65,h:22,label:"OFICINA",fontSize:8}),e.jsx(_,{x:22,y:200,w:65,h:70,label:"DIRECCIÓN",sublabel:["DE MEDIO","AMBIENTE"],fontSize:7}),e.jsx("line",{x1:125,y1:145,x2:460,y2:145,stroke:"#1e293b",strokeWidth:.5,strokeDasharray:"4,4"}),e.jsx("line",{x1:520,y1:90,x2:520,y2:145,stroke:"#f59e0b",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr3)"}),qe.map(c=>e.jsx(Qe,{slot:c,info:t[c.slotKey],onEnter:s,onMove:o,onLeave:i},`p3-${c.slotKey}`))]})})}const B=28,w=22,O=780,ie=430,a=16,A=ie-a-28,W=A-w-6,U=100,q=U+30,R=a+38,re=O-a-4,Q=390,oe=20,ae=re-B,me=U+20,Me=me+w+2,M={};let S=re;[3,4,5,6,7,8,9].forEach(t=>{S-=B,M[t]=S,S-=1});const ue=48,pe=S-ue;S=pe;[10,11,12,13,14,15,16].forEach(t=>{S-=B,M[t]=S,S-=1});const je=32,ge=S-je;S=ge;[17,18,19,20,21].forEach(t=>{S-=B,M[t]=S,S-=1});const be=36,Le=S-be,Z={};let E=Q;[22,23,24,25,26,27].forEach(t=>{E-=B,Z[t]=E,E-=1});E=Q+oe;[28,29,30,31].forEach(t=>{Z[t]=E,E+=B+1});const Se=470,ke=U-50,we=560,Ae=U-50,We=380,Ne=U-70;function et({slot:t,info:s,onEnter:o,onMove:i,onLeave:x}){const[n,r]=j.useState(!1),c=s?.estado??"libre",d=N[c]??N.libre,y=t.w??B,m=t.h??w;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:k=>{r(!0),o(k,String(t.num))},onMouseMove:i,onMouseLeave:()=>{r(!1),x()},children:[e.jsx("rect",{x:t.x,y:t.y,width:y,height:m,rx:2,fill:d.fill,stroke:n?d.strokeH:d.stroke,strokeWidth:n?2:1,style:{filter:n?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:t.x+y/2,y:t.y+m/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:d.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t.num})]})}function D({x:t,y:s,w:o,h:i,lines:x=[],fontSize:n=8,dashed:r=!1}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1,strokeDasharray:r?"4,3":void 0}),x.map((c,d)=>e.jsx("text",{x:t+o/2,y:s+i/2+(d-(x.length-1)/2)*(n+3),textAnchor:"middle",dominantBaseline:"middle",fontSize:n,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:.3,children:c},d))]})}const tt=[{num:1,x:ae,y:me},{num:2,x:ae,y:Me},...[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21].map(t=>({num:t,x:M[t],y:W})),...[22,23,24,25,26].map(t=>({num:t,x:Z[t],y:q})),...[27,28,29,30,31].map(t=>({num:t,x:Z[t],y:q})),{num:32,x:Se,y:ke,h:w+10},{num:37,x:we,y:Ae,h:w+10},...[33,34,35,36].map((t,s)=>({num:t,x:We+s*(B+1),y:Ne-w-4}))];function st({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#0d1526",border:"1px solid #1e293b",borderRadius:14,padding:16,boxShadow:"0 0 80px rgba(245,158,11,0.04)",overflowX:"auto"},children:e.jsxs("svg",{width:O,height:ie,viewBox:`0 0 ${O} ${ie}`,children:[e.jsx("defs",{children:e.jsx("marker",{id:"arr4",markerWidth:"6",markerHeight:"6",refX:"3",refY:"3",orient:"auto",children:e.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#f59e0b"})})}),e.jsx("rect",{x:a+36,y:a,width:O-a-40,height:A-a,fill:"none",stroke:"#1e293b",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:a,y:a,width:36,height:A-a,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1.5}),e.jsx("text",{x:a+18,y:a+(A-a)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:2,transform:`rotate(-90,${a+18},${a+(A-a)/2})`,children:"CANARIO"}),e.jsx("rect",{x:a+36,y:A,width:O-a-40,height:28,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("text",{x:(O+a+36)/2,y:A+14,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#475569",fontFamily:"'Courier New',monospace",letterSpacing:3,children:"PROLONGACIÓN CALLE 4"}),e.jsx(D,{x:R+2,y:80,w:160,h:80,lines:["PROTECCIÓN","CIVIL"],fontSize:9}),e.jsx(D,{x:R+164,y:95,w:80,h:65,lines:["SUBES-","TACIÓN"],fontSize:8}),e.jsx(D,{x:We,y:Ne,w:90,h:50,lines:["OFICINA"],fontSize:9}),e.jsx("rect",{x:O-a-42,y:110,width:40,height:A-a-110+10,rx:3,fill:"#0f172a",stroke:"#334155",strokeWidth:1}),e.jsx("text",{x:O-a-22,y:110+(A-a-110+10)/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${O-a-22},${110+(A-a-110+10)/2})`,children:"FORO DEL OLIVAR"}),e.jsx("rect",{x:Q,y:q,width:oe,height:w,fill:"#0f172a",stroke:"#334155",strokeWidth:1,rx:1}),e.jsx("text",{x:Q+oe/2,y:q+w/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#475569",fontFamily:"'Courier New',monospace",children:"+"}),e.jsx("text",{x:Se+B/2,y:ke-7,textAnchor:"middle",fontSize:8,fill:"#64748b",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:we+B/2,y:Ae-7,textAnchor:"middle",fontSize:8,fill:"#64748b",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx("text",{x:R+6,y:W-12,fontSize:8,fill:"#64748b",fontFamily:"'Courier New',monospace",letterSpacing:1,transform:`rotate(-90,${R+6},${W-12})`,children:"Entrada"}),e.jsx("line",{x1:R+18,y1:W-4,x2:R+50,y2:W-4,stroke:"#f59e0b",strokeWidth:1.2,strokeDasharray:"3,2",markerEnd:"url(#arr4)"}),e.jsx(D,{x:Le,y:W,w:be,h:w,lines:["CASETA"],fontSize:7}),e.jsx(D,{x:ge,y:W,w:je,h:w,lines:["JARDÍN"],fontSize:6}),e.jsx(D,{x:pe,y:W,w:ue,h:w,lines:["OFICINA"],fontSize:7}),e.jsx("line",{x1:R+36,y1:W-18,x2:re,y2:W-18,stroke:"#1e293b",strokeWidth:.5,strokeDasharray:"5,4"}),tt.map(x=>e.jsx(et,{slot:x,info:t[String(x.num)],onEnter:s,onMove:o,onLeave:i},`p4-${x.num}`))]})})}const I=24,f=18,h=1;function l({nums:t,x:s,y:o,cols:i=1,data:x,onEnter:n,onMove:r,onLeave:c,border:d=!0}){const y=Math.ceil(t.length/i),m=i*I+(i-1)*h+6,k=y*f+(y-1)*h+6;return e.jsxs("g",{children:[d&&e.jsx("rect",{x:s,y:o,width:m,height:k,rx:2,fill:"none",stroke:"#2d3f55",strokeWidth:1}),t.map((b,p)=>{const F=p%i,X=Math.floor(p/i);return e.jsx($,{num:b,x:s+3+F*(I+h),y:o+3+X*(f+h),info:x[String(b)],onEnter:n,onMove:r,onLeave:c},`p5-${b}`)})]})}function $({num:t,x:s,y:o,w:i=I,h:x=f,info:n,onEnter:r,onMove:c,onLeave:d}){const[y,m]=j.useState(!1),k=n?.estado??"libre",b=N[k]??N.libre;return e.jsxs("g",{style:{cursor:"pointer"},onMouseEnter:p=>{m(!0),r(p,String(t))},onMouseMove:c,onMouseLeave:()=>{m(!1),d()},children:[e.jsx("rect",{x:s,y:o,width:i,height:x,rx:2,fill:b.fill,stroke:y?b.strokeH:b.stroke,strokeWidth:y?2:1,style:{filter:y?"brightness(1.6)":"none",transition:"fill 0.15s"}}),e.jsx("text",{x:s+i/2,y:o+x/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:6.5,fill:b.text,fontFamily:"'Courier New',monospace",fontWeight:"700",style:{pointerEvents:"none",userSelect:"none"},children:t})]})}function P({x:t,y:s,w:o,h:i,label:x="",sub:n,italic:r}){return e.jsxs("g",{children:[e.jsx("rect",{x:t,y:s,width:o,height:i,rx:3,fill:"#0f172a",stroke:"#2d3f55",strokeWidth:1.5}),e.jsx("text",{x:t+o/2,y:s+i/2-(n?6:0),textAnchor:"middle",dominantBaseline:"middle",fontSize:11,fill:"#4a6080",fontFamily:"'Courier New',monospace",fontStyle:r?"italic":"normal",children:x}),n&&e.jsx("text",{x:t+o/2,y:s+i/2+8,textAnchor:"middle",dominantBaseline:"middle",fontSize:8,fill:"#4a6080",fontFamily:"'Courier New',monospace",children:n})]})}function it({data:t,onEnter:s,onMove:o,onLeave:i}){return e.jsx("div",{style:{background:"#0d1526",border:"1px solid #1e293b",borderRadius:14,padding:12,boxShadow:"0 0 80px rgba(245,158,11,0.03)",overflowX:"auto"},children:e.jsxs("svg",{width:920,height:560,viewBox:"0 0 920 560",children:[e.jsx("rect",{x:16,y:14,width:824,height:506,fill:"none",stroke:"#1e293b",strokeWidth:1.5,rx:3}),e.jsx("rect",{x:16,y:520,width:824,height:26,rx:3,fill:"#0f172a",stroke:"#2d3f55",strokeWidth:1}),e.jsx("text",{x:856/2,y:533,textAnchor:"middle",dominantBaseline:"middle",fontSize:10,fill:"#475569",fontFamily:"'Courier New',monospace",letterSpacing:3,fontWeight:"700",children:"CALLE ANCONITANOS"}),e.jsx("rect",{x:844,y:112,width:52,height:408,rx:3,fill:"#0f172a",stroke:"#2d3f55",strokeWidth:1.5}),e.jsx("text",{x:844+52/2,y:112+408/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:9,fill:"#4a6080",fontFamily:"'Courier New',monospace",letterSpacing:1.5,transform:`rotate(-90,${844+52/2},${112+408/2})`,children:"Av. Central"}),e.jsx(P,{x:844,y:14,w:52,h:95,label:"ENTRADA",sub:"/ SALIDA"}),e.jsx(P,{x:19,y:17,w:215,h:130,label:"Edificio",italic:!0}),e.jsx(P,{x:328,y:17,w:90,h:65,label:"Edificio",italic:!0}),e.jsx(P,{x:440,y:17,w:200,h:58}),e.jsx(P,{x:648,y:17,w:48,h:58}),e.jsx(P,{x:702,y:17,w:60,h:58}),e.jsx($,{num:250,x:19,y:152,w:28,h:f,info:t[250],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:249,x:51,y:152,w:65,h:f,info:t[249],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:248,x:120,y:152,w:60,h:f,info:t[248],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:247,x:184,y:152,w:52,h:f,info:t[247],onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[246,245],x:328,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[244,243],x:328+I+h+8,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[242,241],x:420,y:86,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[240,239,238,237,236,235,234,233,232,231],x:440,y:77,cols:10,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[230,229],x:708,y:77,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[228],x:766,y:77,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx("text",{x:20,y:215,fontSize:8,fill:"#64748b",fontFamily:"'Courier New',monospace",children:"x"}),e.jsx(l,{nums:[129,128,131,130],x:32,y:206,cols:4,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[133,132],x:32+2*(I+h)+8,y:206+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[135,134],x:126,y:288,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[137,136],x:126,y:288+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[139,138],x:126,y:342,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[141,140],x:126,y:342+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[143,142],x:126,y:400,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[145,144],x:126,y:400+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[171,170],x:310,y:246,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[173,175],x:338,y:222,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[172,174],x:338,y:222+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[167,166],x:310,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[169,168],x:370,y:308,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[159,158],x:310,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[163,162],x:310,y:358+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[165,164],x:370,y:358,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[161,160],x:370,y:358+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[151,150],x:310,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[155,154],x:310,y:416+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[157,156],x:370,y:416,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[153,152],x:370,y:416+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[147,146],x:310,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[149,148],x:370,y:472,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[177,176],x:448,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[179,178],x:448,y:224,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[181,180],x:448,y:250,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:182,x:508,y:198,w:I,h:f*2+h+6,info:t[182],onEnter:s,onMove:o,onLeave:i}),e.jsx($,{num:183,x:508,y:284,w:I,h:f*2+h+6,info:t[183],onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[197,196,195,194],x:546,y:198,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[193,192,191,190],x:546,y:248,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[189,188,187,186],x:546,y:360,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[185,184],x:546,y:440,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[199,198],x:658,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[201,200],x:658,y:178+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[205,203],x:658,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[204,202],x:658,y:244+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[207,206],x:658,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[209,208],x:658,y:318+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[211,210],x:658,y:396,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[213,212],x:658,y:396+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[214],x:658,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[215],x:658+I+h+30,y:460,cols:1,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[226,227],x:720,y:178,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[224,225],x:720,y:178+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[222,223],x:720,y:244,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[220,221],x:720,y:244+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[218,219],x:720,y:318,cols:2,data:t,onEnter:s,onMove:o,onLeave:i}),e.jsx(l,{nums:[216,217],x:720,y:318+f+h+4,cols:2,data:t,onEnter:s,onMove:o,onLeave:i})]})})}const fe=[{id:1,label:"Estacionamiento 1",sublabel:"ESTACIONAMIENTO CALLE 10"},{id:2,label:"Estacionamiento 2",sublabel:"ESTACIONAMIENTO CANARIOS"},{id:3,label:"Estacionamiento 3",sublabel:"ESTACIONAMIENTO MEDIO AMBIENTE"},{id:4,label:"Estacionamiento 4",sublabel:"ESTACIONAMIENTO OBRAS"},{id:5,label:"Estacionamiento 5",sublabel:"ESTACIONAMIENTO PAGADURIA"}];function lt(){const[t,s]=j.useState(1),[o,i]=j.useState(!1),[x,n]=j.useState({visible:!1,x:0,y:0,slotKey:"",info:null}),{data:r,stats:c,sync:d,time:y}=Ve(t),m=fe.find(u=>u.id===t),k={idle:"#444c56",loading:"#d29922",ok:"#238636",error:"#da3633"}[d],b=d==="loading"?"pulse 1s infinite":"none",p=j.useCallback((u,Y)=>{const v=r[Y]??{estado:"libre"},Be=he(u.clientX,u.clientY);n({visible:!0,...Be,slotKey:Y,info:v})},[r]),F=j.useCallback(u=>{const Y=he(u.clientX,u.clientY);n(v=>v.visible?{...v,...Y}:v)},[]),X=j.useCallback(()=>{n(u=>({...u,visible:!1}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;700;800&display=swap');
                @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
                *{box-sizing:border-box;}
                .floor-menu{position:relative;display:inline-block;}
                .floor-btn{
                    display:flex;align-items:center;gap:10px;
                    background:#161b22;border:1px solid #30363d;
                    color:#f0f6fc;border-radius:8px;padding:10px 16px;
                    cursor:pointer;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;
                    transition:border-color 0.15s;
                }
                .floor-btn:hover{border-color:#58a6ff;}
                .floor-badge{
                    background:#58a6ff22;color:#58a6ff;
                    border:1px solid #58a6ff44;border-radius:6px;
                    padding:2px 8px;font-size:12px;font-family:monospace;
                }
                .floor-dropdown{
                    position:absolute;top:calc(100% + 6px);left:0;
                    background:#1c2128;border:1px solid #30363d;
                    border-radius:10px;min-width:200px;z-index:500;
                    box-shadow:0 8px 32px rgba(0,0,0,0.5);overflow:hidden;
                }
                .floor-option{
                    display:flex;flex-direction:column;gap:2px;
                    padding:12px 16px;cursor:pointer;
                    transition:background 0.1s;border-bottom:1px solid #21262d;
                    font-family:'Syne',sans-serif;
                }
                .floor-option:last-child{border-bottom:none;}
                .floor-option:hover{background:#30363d44;}
                .floor-option.active{background:#58a6ff11;}
                .floor-option-label{font-size:14px;font-weight:700;color:#f0f6fc;}
                .floor-option-sub{font-size:11px;color:#8b949e;font-family:monospace;}
                .chevron{transition:transform 0.2s;}
                .chevron.open{transform:rotate(180deg);}
            `}),e.jsxs("div",{style:{background:"#fff",minHeight:"100vh",padding:24,fontFamily:"'Syne',system-ui,sans-serif",color:"#691C32"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:28,paddingBottom:20,borderBottom:"1px solid #30363d",flexWrap:"wrap",gap:12},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:16},children:e.jsxs("div",{className:"floor-menu",children:[e.jsxs("button",{className:"floor-btn",onClick:()=>i(u=>!u),children:[e.jsx("span",{className:"floor-badge",children:m?.label}),e.jsx("span",{style:{fontSize:13,color:"#8b949e"},children:m?.sublabel}),e.jsx("svg",{className:`chevron${o?" open":""}`,width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#8b949e",strokeWidth:"2",children:e.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:499},onClick:()=>i(!1)}),e.jsx("div",{className:"floor-dropdown",children:fe.map(u=>e.jsxs("div",{className:`floor-option${t===u.id?" active":""}`,onClick:()=>{s(u.id),i(!1)},children:[e.jsx("span",{className:"floor-option-label",children:u.label}),e.jsx("span",{className:"floor-option-sub",children:u.sublabel})]},u.id))})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24,flexWrap:"wrap"},children:[[{color:"#238636",label:`${c.libres} Libres`},{color:"#da3633",label:`${c.ocupados} Ocupados`},{color:"#9e6a03",label:`${c.reservados} Reservados`}].map(({color:u,label:Y})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontFamily:"monospace",fontSize:13},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:2,background:u}}),e.jsx("span",{children:Y})]},Y)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontFamily:"monospace",fontSize:12,color:"#8b949e"},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:k,animation:b}}),e.jsxs("span",{children:[d==="loading"&&"Actualizando…",d==="ok"&&`Sync ${y}`,d==="error"&&"Sin conexión",d==="idle"&&"—"]})]})]})]}),t===1&&e.jsx(Xe,{data:r,onEnter:p,onMove:F,onLeave:X}),t===2&&e.jsx(Je,{data:r,onEnter:p,onMove:F,onLeave:X}),t===3&&e.jsx(Ze,{data:r,onEnter:p,onMove:F,onLeave:X}),t===4&&e.jsx(st,{data:r,onEnter:p,onMove:F,onLeave:X}),t===5&&e.jsx(it,{data:r,onEnter:p,onMove:F,onLeave:X})]}),e.jsx(Oe,{...x})]})}function he(t,s){return{x:t+16+220>window.innerWidth?t-220-16:t+16,y:s-10+130>window.innerHeight?s-130:s-10}}export{lt as default};
